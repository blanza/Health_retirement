* NOTEs:

	*** You need to set the Stata working directory to the path where the data file is located.
	*** Additionally, inside this path, you need to create the following folders:
			*** `path'\Stata\Do
			*** `path'\Stata\Data
			*** `path'\Stata\Log
			
			
loc path "C:\Users\Laeticia\Desktop\Paper JEOA - Review 1" 
set more off

clear
quietly infix               ///
  int     country    1-3    ///
  int     year       4-7    ///
  double  sample     8-16   ///
  double  serial     17-26  ///
  int     pernum     27-29  ///
  double  perwt      30-37  ///
  byte    resident   38-38  ///
  byte    relate     39-39  ///
  int     related    40-43  ///
  int     age        44-46  ///
  byte    sex        47-47  ///
  byte    marst      48-48  ///
  int     marstd     49-51  ///
  byte    lit        52-52  ///
  byte    edattain   53-53  ///
  int     edattaind  54-56  ///
  byte    yrschool   57-58  ///
  byte    empstat    59-59  ///
  int     empstatd   60-62  ///
  using "`path'\ipumsi_00007.dat"

replace perwt     = perwt     / 100

format sample    %9.0f
format serial    %10.0f
format perwt     %8.2f

label var country   `"Country"'
label var year      `"Year"'
label var sample    `"IPUMS sample identifier"'
label var serial    `"Household serial number"'
label var pernum    `"Person number"'
label var perwt     `"Person weight"'
label var resident  `"Residence status: de facto, de jure"'
label var relate    `"Relationship to household head [general version]"'
label var related   `"Relationship to household head [detailed version]"'
label var age       `"Age"'
label var sex       `"Sex"'
label var marst     `"Marital status [general version]"'
label var marstd    `"Marital status [detailed version]"'
label var lit       `"Literacy"'
label var edattain  `"Educational attainment, international recode [general version]"'
label var edattaind `"Educational attainment, international recode [detailed version]"'
label var yrschool  `"Years of schooling"'
label var empstat   `"Activity status (employment status) [general version]"'
label var empstatd  `"Activity status (employment status) [detailed version]"'

label define country_lbl 032 `"Argentina"'
label define country_lbl 051 `"Armenia"', add
label define country_lbl 040 `"Austria"', add
label define country_lbl 050 `"Bangladesh"', add
label define country_lbl 112 `"Belarus"', add
label define country_lbl 068 `"Bolivia"', add
label define country_lbl 072 `"Botswana"', add
label define country_lbl 076 `"Brazil"', add
label define country_lbl 854 `"Burkina Faso"', add
label define country_lbl 116 `"Cambodia"', add
label define country_lbl 120 `"Cameroon"', add
label define country_lbl 124 `"Canada"', add
label define country_lbl 152 `"Chile"', add
label define country_lbl 156 `"China"', add
label define country_lbl 170 `"Colombia"', add
label define country_lbl 188 `"Costa Rica"', add
label define country_lbl 192 `"Cuba"', add
label define country_lbl 214 `"Dominican Republic"', add
label define country_lbl 218 `"Ecuador"', add
label define country_lbl 818 `"Egypt"', add
label define country_lbl 222 `"El Salvador"', add
label define country_lbl 231 `"Ethiopia"', add
label define country_lbl 242 `"Fiji"', add
label define country_lbl 250 `"France"', add
label define country_lbl 276 `"Germany"', add
label define country_lbl 288 `"Ghana"', add
label define country_lbl 300 `"Greece"', add
label define country_lbl 324 `"Guinea"', add
label define country_lbl 332 `"Haiti"', add
label define country_lbl 348 `"Hungary"', add
label define country_lbl 356 `"India"', add
label define country_lbl 360 `"Indonesia"', add
label define country_lbl 364 `"Iran"', add
label define country_lbl 368 `"Iraq"', add
label define country_lbl 372 `"Ireland"', add
label define country_lbl 376 `"Israel"', add
label define country_lbl 380 `"Italy"', add
label define country_lbl 388 `"Jamaica"', add
label define country_lbl 400 `"Jordan"', add
label define country_lbl 404 `"Kenya"', add
label define country_lbl 417 `"Kyrgyz Republic"', add
label define country_lbl 430 `"Liberia"', add
label define country_lbl 454 `"Malawi"', add
label define country_lbl 458 `"Malaysia"', add
label define country_lbl 466 `"Mali"', add
label define country_lbl 484 `"Mexico"', add
label define country_lbl 496 `"Mongolia"', add
label define country_lbl 504 `"Morocco"', add
label define country_lbl 508 `"Mozambique"', add
label define country_lbl 524 `"Nepal"', add
label define country_lbl 528 `"Netherlands"', add
label define country_lbl 558 `"Nicaragua"', add
label define country_lbl 566 `"Nigeria"', add
label define country_lbl 586 `"Pakistan"', add
label define country_lbl 275 `"Palestine"', add
label define country_lbl 591 `"Panama"', add
label define country_lbl 600 `"Paraguay"', add
label define country_lbl 604 `"Peru"', add
label define country_lbl 608 `"Philippines"', add
label define country_lbl 616 `"Poland"', add
label define country_lbl 620 `"Portugal"', add
label define country_lbl 630 `"Puerto Rico"', add
label define country_lbl 642 `"Romania"', add
label define country_lbl 646 `"Rwanda"', add
label define country_lbl 662 `"Saint Lucia"', add
label define country_lbl 686 `"Senegal"', add
label define country_lbl 694 `"Sierra Leone"', add
label define country_lbl 705 `"Slovenia"', add
label define country_lbl 710 `"South Africa"', add
label define country_lbl 728 `"South Sudan"', add
label define country_lbl 724 `"Spain"', add
label define country_lbl 729 `"Sudan"', add
label define country_lbl 756 `"Switzerland"', add
label define country_lbl 834 `"Tanzania"', add
label define country_lbl 764 `"Thailand"', add
label define country_lbl 780 `"Trinidad and Tobago"', add
label define country_lbl 792 `"Turkey"', add
label define country_lbl 800 `"Uganda"', add
label define country_lbl 804 `"Ukraine"', add
label define country_lbl 826 `"United Kingdom"', add
label define country_lbl 840 `"United States"', add
label define country_lbl 858 `"Uruguay"', add
label define country_lbl 862 `"Venezuela"', add
label define country_lbl 704 `"Vietnam"', add
label define country_lbl 894 `"Zambia"', add
label values country country_lbl

label define year_lbl 1960 `"1960"'
label define year_lbl 1962 `"1962"', add
label define year_lbl 1963 `"1963"', add
label define year_lbl 1964 `"1964"', add
label define year_lbl 1966 `"1966"', add
label define year_lbl 1968 `"1968"', add
label define year_lbl 1969 `"1969"', add
label define year_lbl 1970 `"1970"', add
label define year_lbl 1971 `"1971"', add
label define year_lbl 1972 `"1972"', add
label define year_lbl 1973 `"1973"', add
label define year_lbl 1974 `"1974"', add
label define year_lbl 1975 `"1975"', add
label define year_lbl 1976 `"1976"', add
label define year_lbl 1977 `"1977"', add
label define year_lbl 1978 `"1978"', add
label define year_lbl 1979 `"1979"', add
label define year_lbl 1980 `"1980"', add
label define year_lbl 1981 `"1981"', add
label define year_lbl 1982 `"1982"', add
label define year_lbl 1983 `"1983"', add
label define year_lbl 1984 `"1984"', add
label define year_lbl 1985 `"1985"', add
label define year_lbl 1986 `"1986"', add
label define year_lbl 1987 `"1987"', add
label define year_lbl 1989 `"1989"', add
label define year_lbl 1990 `"1990"', add
label define year_lbl 1991 `"1991"', add
label define year_lbl 1992 `"1992"', add
label define year_lbl 1993 `"1993"', add
label define year_lbl 1994 `"1994"', add
label define year_lbl 1995 `"1995"', add
label define year_lbl 1996 `"1996"', add
label define year_lbl 1997 `"1997"', add
label define year_lbl 1998 `"1998"', add
label define year_lbl 1999 `"1999"', add
label define year_lbl 2000 `"2000"', add
label define year_lbl 2001 `"2001"', add
label define year_lbl 2002 `"2002"', add
label define year_lbl 2003 `"2003"', add
label define year_lbl 2004 `"2004"', add
label define year_lbl 2005 `"2005"', add
label define year_lbl 2006 `"2006"', add
label define year_lbl 2007 `"2007"', add
label define year_lbl 2008 `"2008"', add
label define year_lbl 2009 `"2009"', add
label define year_lbl 2010 `"2010"', add
label define year_lbl 2011 `"2011"', add
label define year_lbl 2012 `"2012"', add
label define year_lbl 2013 `"2013"', add
label define year_lbl 2014 `"2014"', add
label define year_lbl 2015 `"2015"', add
label values year year_lbl

label define sample_lbl 032197001 `"Argentina 1970"'
label define sample_lbl 032219801 `"Argentina 1980"', add
label define sample_lbl 032199101 `"Argentina 1991"', add
label define sample_lbl 032200101 `"Argentina 2001"', add
label define sample_lbl 032201001 `"Argentina 2010"', add
label define sample_lbl 051200101 `"Armenia 2001"', add
label define sample_lbl 051201101 `"Armenia 2011"', add
label define sample_lbl 040197101 `"Austria 1971"', add
label define sample_lbl 040198101 `"Austria 1981"', add
label define sample_lbl 040199101 `"Austria 1991"', add
label define sample_lbl 040200101 `"Austria 2001"', add
label define sample_lbl 040201101 `"Austria 2011"', add
label define sample_lbl 050199101 `"Bangladesh 1991"', add
label define sample_lbl 050200101 `"Bangladesh 2001"', add
label define sample_lbl 050201101 `"Bangladesh 2011"', add
label define sample_lbl 112199901 `"Belarus 1999"', add
label define sample_lbl 112200901 `"Belarus 2009"', add
label define sample_lbl 068197601 `"Bolivia 1976"', add
label define sample_lbl 068199201 `"Bolivia 1992"', add
label define sample_lbl 068200101 `"Bolivia 2001"', add
label define sample_lbl 072198101 `"Botswana 1981"', add
label define sample_lbl 072199101 `"Botswana 1991"', add
label define sample_lbl 072200101 `"Botswana 2001"', add
label define sample_lbl 072201101 `"Botswana 2011"', add
label define sample_lbl 076196001 `"Brazil 1960"', add
label define sample_lbl 076197001 `"Brazil 1970"', add
label define sample_lbl 076198001 `"Brazil 1980"', add
label define sample_lbl 076199101 `"Brazil 1991"', add
label define sample_lbl 076200001 `"Brazil 2000"', add
label define sample_lbl 076201001 `"Brazil 2010"', add
label define sample_lbl 854198501 `"Burkina Faso 1985"', add
label define sample_lbl 854199601 `"Burkina Faso 1996"', add
label define sample_lbl 854200601 `"Burkina Faso 2006"', add
label define sample_lbl 116199801 `"Cambodia 1998"', add
label define sample_lbl 116200801 `"Cambodia 2008"', add
label define sample_lbl 120197601 `"Cameroon 1976"', add
label define sample_lbl 120198701 `"Cameroon 1987"', add
label define sample_lbl 120200501 `"Cameroon 2005"', add
label define sample_lbl 124197101 `"Canada 1971"', add
label define sample_lbl 124198101 `"Canada 1981"', add
label define sample_lbl 124199101 `"Canada 1991"', add
label define sample_lbl 124200101 `"Canada 2001"', add
label define sample_lbl 124201101 `"Canada 2011"', add
label define sample_lbl 152196001 `"Chile 1960"', add
label define sample_lbl 152197001 `"Chile 1970"', add
label define sample_lbl 152198201 `"Chile 1982"', add
label define sample_lbl 152199201 `"Chile 1992"', add
label define sample_lbl 152200201 `"Chile 2002"', add
label define sample_lbl 156198201 `"China 1982"', add
label define sample_lbl 156199001 `"China 1990"', add
label define sample_lbl 156200001 `"China 2000"', add
label define sample_lbl 170196401 `"Colombia 1964"', add
label define sample_lbl 170197301 `"Colombia 1973"', add
label define sample_lbl 170198501 `"Colombia 1985"', add
label define sample_lbl 170199301 `"Colombia 1993"', add
label define sample_lbl 170200501 `"Colombia 2005"', add
label define sample_lbl 188196301 `"Costa Rica 1963"', add
label define sample_lbl 188197301 `"Costa Rica 1973"', add
label define sample_lbl 188198401 `"Costa Rica 1984"', add
label define sample_lbl 188200001 `"Costa Rica 2000"', add
label define sample_lbl 188201101 `"Costa Rica 2011"', add
label define sample_lbl 192200201 `"Cuba 2002"', add
label define sample_lbl 214196001 `"Dominican Republic 1960"', add
label define sample_lbl 214197001 `"Dominican Republic 1970"', add
label define sample_lbl 214198101 `"Dominican Republic 1981"', add
label define sample_lbl 214200201 `"Dominican Republic 2002"', add
label define sample_lbl 214201001 `"Dominican Republic 2010"', add
label define sample_lbl 218196201 `"Ecuador 1962"', add
label define sample_lbl 218197401 `"Ecuador 1974"', add
label define sample_lbl 218198201 `"Ecuador 1982"', add
label define sample_lbl 218199001 `"Ecuador 1990"', add
label define sample_lbl 218200101 `"Ecuador 2001"', add
label define sample_lbl 218201001 `"Ecuador 2010"', add
label define sample_lbl 818198601 `"Egypt 1986"', add
label define sample_lbl 818199601 `"Egypt 1996"', add
label define sample_lbl 818200601 `"Egypt 2006"', add
label define sample_lbl 222199201 `"El Salvador 1992"', add
label define sample_lbl 222200701 `"El Salvador 2007"', add
label define sample_lbl 231198401 `"Ethiopia 1984"', add
label define sample_lbl 231199401 `"Ethiopia 1994"', add
label define sample_lbl 231200701 `"Ethiopia 2007"', add
label define sample_lbl 242196601 `"Fiji 1966"', add
label define sample_lbl 242197601 `"Fiji 1976"', add
label define sample_lbl 242198601 `"Fiji 1986"', add
label define sample_lbl 242199601 `"Fiji 1996"', add
label define sample_lbl 242200701 `"Fiji 2007"', add
label define sample_lbl 250196201 `"France 1962"', add
label define sample_lbl 250196801 `"France 1968"', add
label define sample_lbl 250197501 `"France 1975"', add
label define sample_lbl 250198201 `"France 1982"', add
label define sample_lbl 250199001 `"France 1990"', add
label define sample_lbl 250199901 `"France 1999"', add
label define sample_lbl 250200601 `"France 2006"', add
label define sample_lbl 250201101 `"France 2011"', add
label define sample_lbl 276197001 `"Germany 1970 (West)"', add
label define sample_lbl 276197101 `"Germany 1971 (East)"', add
label define sample_lbl 276198101 `"Germany 1981 (East)"', add
label define sample_lbl 276198701 `"Germany 1987 (West)"', add
label define sample_lbl 288198401 `"Ghana 1984"', add
label define sample_lbl 288200001 `"Ghana 2000"', add
label define sample_lbl 288201001 `"Ghana 2010"', add
label define sample_lbl 300197101 `"Greece 1971"', add
label define sample_lbl 300198101 `"Greece 1981"', add
label define sample_lbl 300199101 `"Greece 1991"', add
label define sample_lbl 300200101 `"Greece 2001"', add
label define sample_lbl 300201101 `"Greece 2011"', add
label define sample_lbl 324198301 `"Guinea 1983"', add
label define sample_lbl 324199601 `"Guinea 1996"', add
label define sample_lbl 332197101 `"Haiti 1971"', add
label define sample_lbl 332198201 `"Haiti 1982"', add
label define sample_lbl 332200301 `"Haiti 2003"', add
label define sample_lbl 348197001 `"Hungary 1970"', add
label define sample_lbl 348198001 `"Hungary 1980"', add
label define sample_lbl 348199001 `"Hungary 1990"', add
label define sample_lbl 348200101 `"Hungary 2001"', add
label define sample_lbl 348201101 `"Hungary 2011"', add
label define sample_lbl 356198341 `"India 1983"', add
label define sample_lbl 356198741 `"India 1987"', add
label define sample_lbl 356199341 `"India 1993"', add
label define sample_lbl 356199941 `"India 1999"', add
label define sample_lbl 356200441 `"India 2004"', add
label define sample_lbl 356200941 `"India 2009"', add
label define sample_lbl 360197101 `"Indonesia 1971"', add
label define sample_lbl 360197601 `"Indonesia 1976"', add
label define sample_lbl 360198001 `"Indonesia 1980"', add
label define sample_lbl 360198501 `"Indonesia 1985"', add
label define sample_lbl 360199001 `"Indonesia 1990"', add
label define sample_lbl 360199501 `"Indonesia 1995"', add
label define sample_lbl 360200001 `"Indonesia 2000"', add
label define sample_lbl 360200501 `"Indonesia 2005"', add
label define sample_lbl 360201001 `"Indonesia 2010"', add
label define sample_lbl 364200601 `"Iran 2006"', add
label define sample_lbl 364201101 `"Iran 2011"', add
label define sample_lbl 368199701 `"Iraq 1997"', add
label define sample_lbl 372197101 `"Ireland 1971"', add
label define sample_lbl 372197901 `"Ireland 1979"', add
label define sample_lbl 372198101 `"Ireland 1981"', add
label define sample_lbl 372198601 `"Ireland 1986"', add
label define sample_lbl 372199101 `"Ireland 1991"', add
label define sample_lbl 372199601 `"Ireland 1996"', add
label define sample_lbl 372200201 `"Ireland 2002"', add
label define sample_lbl 372200601 `"Ireland 2006"', add
label define sample_lbl 372201101 `"Ireland 2011"', add
label define sample_lbl 376197201 `"Israel 1972"', add
label define sample_lbl 376198301 `"Israel 1983"', add
label define sample_lbl 376199501 `"Israel 1995"', add
label define sample_lbl 380200101 `"Italy 2001"', add
label define sample_lbl 388198201 `"Jamaica 1982"', add
label define sample_lbl 388199101 `"Jamaica 1991"', add
label define sample_lbl 388200101 `"Jamaica 2001"', add
label define sample_lbl 400200401 `"Jordan 2004"', add
label define sample_lbl 404196901 `"Kenya 1969"', add
label define sample_lbl 404197901 `"Kenya 1979"', add
label define sample_lbl 404198901 `"Kenya 1989"', add
label define sample_lbl 404199901 `"Kenya 1999"', add
label define sample_lbl 404200901 `"Kenya 2009"', add
label define sample_lbl 417199901 `"Kyrgyz Republic 1999"', add
label define sample_lbl 417200901 `"Kyrgyz Republic 2009"', add
label define sample_lbl 430197401 `"Liberia 1974"', add
label define sample_lbl 430200801 `"Liberia 2008"', add
label define sample_lbl 454198701 `"Malawi 1987"', add
label define sample_lbl 454199801 `"Malawi 1998"', add
label define sample_lbl 454200801 `"Malawi 2008"', add
label define sample_lbl 458197001 `"Malaysia 1970"', add
label define sample_lbl 458198001 `"Malaysia 1980"', add
label define sample_lbl 458199101 `"Malaysia 1991"', add
label define sample_lbl 458200001 `"Malaysia 2000"', add
label define sample_lbl 466198701 `"Mali 1987"', add
label define sample_lbl 466199801 `"Mali 1998"', add
label define sample_lbl 466200901 `"Mali 2009"', add
label define sample_lbl 484196001 `"Mexico 1960"', add
label define sample_lbl 484197001 `"Mexico 1970"', add
label define sample_lbl 484199001 `"Mexico 1990"', add
label define sample_lbl 484199501 `"Mexico 1995"', add
label define sample_lbl 484200001 `"Mexico 2000"', add
label define sample_lbl 484200501 `"Mexico 2005"', add
label define sample_lbl 484201001 `"Mexico 2010"', add
label define sample_lbl 484201501 `"Mexico 2015"', add
label define sample_lbl 496198901 `"Mongolia 1989"', add
label define sample_lbl 496200001 `"Mongolia 2000"', add
label define sample_lbl 504198201 `"Morocco 1982"', add
label define sample_lbl 504199401 `"Morocco 1994"', add
label define sample_lbl 504200401 `"Morocco 2004"', add
label define sample_lbl 508199701 `"Mozambique 1997"', add
label define sample_lbl 508200701 `"Mozambique 2007"', add
label define sample_lbl 524200101 `"Nepal 2001"', add
label define sample_lbl 528196001 `"Netherlands 1960"', add
label define sample_lbl 528197101 `"Netherlands 1971"', add
label define sample_lbl 528200101 `"Netherlands 2001"', add
label define sample_lbl 558197101 `"Nicaragua 1971"', add 
label define sample_lbl 558199501 `"Nicaragua 1995"', add
label define sample_lbl 558200501 `"Nicaragua 2005"', add
label define sample_lbl 566200621 `"Nigeria 2006"', add
label define sample_lbl 566200721 `"Nigeria 2007"', add
label define sample_lbl 566200821 `"Nigeria 2008"', add
label define sample_lbl 566200921 `"Nigeria 2009"', add
label define sample_lbl 566201021 `"Nigeria 2010"', add
label define sample_lbl 586197301 `"Pakistan 1973"', add
label define sample_lbl 586198101 `"Pakistan 1981"', add
label define sample_lbl 586199801 `"Pakistan 1998"', add
label define sample_lbl 275199701 `"Palestine 1997"', add
label define sample_lbl 275200701 `"Palestine 2007"', add
label define sample_lbl 591196001 `"Panama 1960"', add
label define sample_lbl 591197001 `"Panama 1970"', add
label define sample_lbl 591198001 `"Panama 1980"', add
label define sample_lbl 591199001 `"Panama 1990"', add
label define sample_lbl 591200001 `"Panama 2000"', add
label define sample_lbl 591201001 `"Panama 2010"', add
label define sample_lbl 600196201 `"Paraguay 1962"', add
label define sample_lbl 600197201 `"Paraguay 1972"', add
label define sample_lbl 600198201 `"Paraguay 1982"', add
label define sample_lbl 600199201 `"Paraguay 1992"', add
label define sample_lbl 600200201 `"Paraguay 2002"', add
label define sample_lbl 604199301 `"Peru 1993"', add
label define sample_lbl 604200701 `"Peru 2007"', add
label define sample_lbl 608199001 `"Philippines 1990"', add
label define sample_lbl 608199501 `"Philippines 1995"', add
label define sample_lbl 608200001 `"Philippines 2000"', add
label define sample_lbl 616197801 `"Poland 1978"', add
label define sample_lbl 616198801 `"Poland 1988"', add
label define sample_lbl 616200201 `"Poland 2002"', add
label define sample_lbl 616201101 `"Poland 2011"', add
label define sample_lbl 620198101 `"Portugal 1981"', add
label define sample_lbl 620199101 `"Portugal 1991"', add
label define sample_lbl 620200101 `"Portugal 2001"', add
label define sample_lbl 620201101 `"Portugal 2011"', add
label define sample_lbl 630197001 `"Puerto Rico 1970"', add
label define sample_lbl 630198001 `"Puerto Rico 1980"', add
label define sample_lbl 630199001 `"Puerto Rico 1990"', add
label define sample_lbl 630200001 `"Puerto Rico 2000"', add
label define sample_lbl 630200501 `"Puerto Rico 2005"', add
label define sample_lbl 630201001 `"Puerto Rico 2010"', add
label define sample_lbl 642197701 `"Romania 1977"', add
label define sample_lbl 642199201 `"Romania 1992"', add
label define sample_lbl 642200201 `"Romania 2002"', add
label define sample_lbl 642201101 `"Romania 2011"', add
label define sample_lbl 646199101 `"Rwanda 1991"', add
label define sample_lbl 646200201 `"Rwanda 2002"', add
label define sample_lbl 662198001 `"Saint Lucia 1980"', add
label define sample_lbl 662199101 `"Saint Lucia 1991"', add
label define sample_lbl 686198801 `"Senegal 1988"', add
label define sample_lbl 686200201 `"Senegal 2002"', add
label define sample_lbl 694200401 `"Sierra Leone 2004"', add
label define sample_lbl 705200201 `"Slovenia 2002"', add
label define sample_lbl 710199601 `"South Africa 1996"', add
label define sample_lbl 710200101 `"South Africa 2001"', add
label define sample_lbl 710200701 `"South Africa 2007"', add
label define sample_lbl 710201101 `"South Africa 2011"', add
label define sample_lbl 728200801 `"South Sudan 2008"', add
label define sample_lbl 724198101 `"Spain 1981"', add
label define sample_lbl 724199101 `"Spain 1991"', add
label define sample_lbl 724200101 `"Spain 2001"', add
label define sample_lbl 724201101 `"Spain 2011"', add
label define sample_lbl 729200801 `"Sudan 2008"', add
label define sample_lbl 756197001 `"Switzerland 1970"', add
label define sample_lbl 756198001 `"Switzerland 1980"', add
label define sample_lbl 756199001 `"Switzerland 1990"', add
label define sample_lbl 756200001 `"Switzerland 2000"', add
label define sample_lbl 834198801 `"Tanzania 1988"', add
label define sample_lbl 834200201 `"Tanzania 2002"', add
label define sample_lbl 834201201 `"Tanzania 2012"', add
label define sample_lbl 764197001 `"Thailand 1970"', add
label define sample_lbl 764198001 `"Thailand 1980"', add
label define sample_lbl 764199001 `"Thailand 1990"', add
label define sample_lbl 764200001 `"Thailand 2000"', add
label define sample_lbl 780197001 `"Trinidad and Tobago 1970"', add
label define sample_lbl 780198001 `"Trinidad and Tobago 1980"', add
label define sample_lbl 780199001 `"Trinidad and Tobago 1990"', add
label define sample_lbl 780200001 `"Trinidad and Tobago 2000"', add
label define sample_lbl 780201101 `"Trinidad and Tobago 2011"', add
label define sample_lbl 792198501 `"Turkey 1985"', add
label define sample_lbl 792199001 `"Turkey 1990"', add
label define sample_lbl 792200001 `"Turkey 2000"', add
label define sample_lbl 800199101 `"Uganda 1991"', add
label define sample_lbl 800200201 `"Uganda 2002"', add
label define sample_lbl 804200101 `"Ukraine 2001"', add
label define sample_lbl 826199101 `"United Kingdom 1991"', add
label define sample_lbl 826200101 `"United Kingdom 2001"', add
label define sample_lbl 840196001 `"United States 1960"', add
label define sample_lbl 840197001 `"United States 1970"', add
label define sample_lbl 840198001 `"United States 1980"', add
label define sample_lbl 840199001 `"United States 1990"', add
label define sample_lbl 840200001 `"United States 2000"', add
label define sample_lbl 840200501 `"United States 2005"', add
label define sample_lbl 840201001 `"United States 2010"', add
label define sample_lbl 858196301 `"Uruguay 1963"', add
label define sample_lbl 858197501 `"Uruguay 1975"', add
label define sample_lbl 858198501 `"Uruguay 1985"', add
label define sample_lbl 858199601 `"Uruguay 1996"', add
label define sample_lbl 858200621 `"Uruguay 2006"', add
label define sample_lbl 858201101 `"Uruguay 2011"', add
label define sample_lbl 862197101 `"Venezuela 1971"', add
label define sample_lbl 862198101 `"Venezuela 1981"', add
label define sample_lbl 862199001 `"Venezuela 1990"', add
label define sample_lbl 862200101 `"Venezuela 2001"', add
label define sample_lbl 704198901 `"Vietnam 1989"', add
label define sample_lbl 704199901 `"Vietnam 1999"', add
label define sample_lbl 704200901 `"Vietnam 2009"', add
label define sample_lbl 894199001 `"Zambia 1990"', add
label define sample_lbl 894200001 `"Zambia 2000"', add
label define sample_lbl 894201001 `"Zambia 2010"', add
label values sample sample_lbl

label define resident_lbl 1 `"Present resident"'
label define resident_lbl 2 `"Absent resident"', add
label define resident_lbl 3 `"Visitor/non-resident"', add
label define resident_lbl 4 `"De facto population (present persons)"', add
label define resident_lbl 9 `"Unknown/missing"', add
label values resident resident_lbl

label define relate_lbl 1 `"Head"'
label define relate_lbl 2 `"Spouse/partner"', add
label define relate_lbl 3 `"Child"', add
label define relate_lbl 4 `"Other relative"', add
label define relate_lbl 5 `"Non-relative"', add
label define relate_lbl 6 `"Other relative or non-relative"', add
label define relate_lbl 9 `"Unknown"', add
label values relate relate_lbl

label define related_lbl 1000 `"Head"'
label define related_lbl 2000 `"Spouse/partner"', add
label define related_lbl 2100 `"Spouse"', add
label define related_lbl 2200 `"Unmarried partner"', add
label define related_lbl 2300 `"Same-sex spouse/partner"', add
label define related_lbl 3000 `"Child"', add
label define related_lbl 3100 `"Biological child"', add
label define related_lbl 3200 `"Adopted child"', add
label define related_lbl 3300 `"Stepchild"', add
label define related_lbl 3400 `"Child/child-in-law"', add
label define related_lbl 3500 `"Child/child-in-law/grandchild"', add
label define related_lbl 3600 `"Child of unmarried partner"', add
label define related_lbl 4000 `"Other relative"', add
label define related_lbl 4100 `"Grandchild"', add
label define related_lbl 4110 `"Grandchild or great grandchild"', add
label define related_lbl 4120 `"Great grandchild"', add
label define related_lbl 4130 `"Great-great grandchild"', add
label define related_lbl 4200 `"Parent/parent-in-law"', add
label define related_lbl 4210 `"Parent"', add
label define related_lbl 4211 `"Stepparent"', add
label define related_lbl 4220 `"Parent-in-law"', add
label define related_lbl 4300 `"Child-in-law"', add
label define related_lbl 4301 `"Daughter-in-law"', add
label define related_lbl 4302 `"Spouse/partner of child"', add
label define related_lbl 4310 `"Unmarried partner of child"', add
label define related_lbl 4400 `"Sibling/sibling-in-law"', add
label define related_lbl 4410 `"Sibling"', add
label define related_lbl 4420 `"Stepsibling"', add
label define related_lbl 4430 `"Sibling-in-law"', add
label define related_lbl 4431 `"Sibling of spouse/partner"', add
label define related_lbl 4432 `"Spouse/partner of sibling"', add
label define related_lbl 4500 `"Grandparent"', add
label define related_lbl 4510 `"Great grandparent"', add
label define related_lbl 4600 `"Parent/grandparent/ascendant"', add
label define related_lbl 4700 `"Aunt/uncle"', add
label define related_lbl 4800 `"Other specified relative"', add
label define related_lbl 4810 `"Nephew/niece"', add
label define related_lbl 4820 `"Cousin"', add
label define related_lbl 4830 `"Sibling of sibling-in-law"', add
label define related_lbl 4900 `"Other relative, not elsewhere classified"', add
label define related_lbl 4910 `"Other relative with same family name"', add
label define related_lbl 4920 `"Other relative with different family name"', add
label define related_lbl 4930 `"Other relative, not specified (secondary family)"', add
label define related_lbl 5000 `"Non-relative"', add
label define related_lbl 5100 `"Friend/guest/visitor/partner"', add
label define related_lbl 5110 `"Partner/friend"', add
label define related_lbl 5111 `"Friend"', add
label define related_lbl 5112 `"Partner/roommate"', add
label define related_lbl 5113 `"Housemate/roommate"', add
label define related_lbl 5120 `"Visitor"', add
label define related_lbl 5130 `"Ex-spouse"', add
label define related_lbl 5140 `"Godparent"', add
label define related_lbl 5150 `"Godchild"', add
label define related_lbl 5200 `"Employee"', add
label define related_lbl 5210 `"Domestic employee"', add
label define related_lbl 5220 `"Relative of employee, n.s."', add
label define related_lbl 5221 `"Spouse of servant"', add
label define related_lbl 5222 `"Child of servant"', add
label define related_lbl 5223 `"Other relative of servant"', add
label define related_lbl 5300 `"Roomer/boarder/lodger/foster child"', add
label define related_lbl 5310 `"Boarder"', add
label define related_lbl 5311 `"Boarder or guest"', add
label define related_lbl 5320 `"Lodger"', add
label define related_lbl 5330 `"Foster child"', add
label define related_lbl 5340 `"Tutored/foster child"', add
label define related_lbl 5350 `"Tutored child"', add
label define related_lbl 5400 `"Employee, boarder or guest"', add
label define related_lbl 5500 `"Other specified non-relative"', add
label define related_lbl 5510 `"Agregado"', add
label define related_lbl 5520 `"Temporary resident, guest"', add
label define related_lbl 5600 `"Group quarters"', add
label define related_lbl 5610 `"Group quarters, non-inmates"', add
label define related_lbl 5620 `"Institutional inmates"', add
label define related_lbl 5900 `"Non-relative, n.e.c."', add
label define related_lbl 6000 `"Other relative or non-relative"', add
label define related_lbl 9999 `"Unknown"', add
label values related related_lbl

label define age_lbl 000 `"Less than 1 year"'
label define age_lbl 001 `"1 year"', add
label define age_lbl 002 `"2 years"', add
label define age_lbl 003 `"3"', add
label define age_lbl 004 `"4"', add
label define age_lbl 005 `"5"', add
label define age_lbl 006 `"6"', add
label define age_lbl 007 `"7"', add
label define age_lbl 008 `"8"', add
label define age_lbl 009 `"9"', add
label define age_lbl 010 `"10"', add
label define age_lbl 011 `"11"', add
label define age_lbl 012 `"12"', add
label define age_lbl 013 `"13"', add
label define age_lbl 014 `"14"', add
label define age_lbl 015 `"15"', add
label define age_lbl 016 `"16"', add
label define age_lbl 017 `"17"', add
label define age_lbl 018 `"18"', add
label define age_lbl 019 `"19"', add
label define age_lbl 020 `"20"', add
label define age_lbl 021 `"21"', add
label define age_lbl 022 `"22"', add
label define age_lbl 023 `"23"', add
label define age_lbl 024 `"24"', add
label define age_lbl 025 `"25"', add
label define age_lbl 026 `"26"', add
label define age_lbl 027 `"27"', add
label define age_lbl 028 `"28"', add
label define age_lbl 029 `"29"', add
label define age_lbl 030 `"30"', add
label define age_lbl 031 `"31"', add
label define age_lbl 032 `"32"', add
label define age_lbl 033 `"33"', add
label define age_lbl 034 `"34"', add
label define age_lbl 035 `"35"', add
label define age_lbl 036 `"36"', add
label define age_lbl 037 `"37"', add
label define age_lbl 038 `"38"', add
label define age_lbl 039 `"39"', add
label define age_lbl 040 `"40"', add
label define age_lbl 041 `"41"', add
label define age_lbl 042 `"42"', add
label define age_lbl 043 `"43"', add
label define age_lbl 044 `"44"', add
label define age_lbl 045 `"45"', add
label define age_lbl 046 `"46"', add
label define age_lbl 047 `"47"', add
label define age_lbl 048 `"48"', add
label define age_lbl 049 `"49"', add
label define age_lbl 050 `"50"', add
label define age_lbl 051 `"51"', add
label define age_lbl 052 `"52"', add
label define age_lbl 053 `"53"', add
label define age_lbl 054 `"54"', add
label define age_lbl 055 `"55"', add
label define age_lbl 056 `"56"', add
label define age_lbl 057 `"57"', add
label define age_lbl 058 `"58"', add
label define age_lbl 059 `"59"', add
label define age_lbl 060 `"60"', add
label define age_lbl 061 `"61"', add
label define age_lbl 062 `"62"', add
label define age_lbl 063 `"63"', add
label define age_lbl 064 `"64"', add
label define age_lbl 065 `"65"', add
label define age_lbl 066 `"66"', add
label define age_lbl 067 `"67"', add
label define age_lbl 068 `"68"', add
label define age_lbl 069 `"69"', add
label define age_lbl 070 `"70"', add
label define age_lbl 071 `"71"', add
label define age_lbl 072 `"72"', add
label define age_lbl 073 `"73"', add
label define age_lbl 074 `"74"', add
label define age_lbl 075 `"75"', add
label define age_lbl 076 `"76"', add
label define age_lbl 077 `"77"', add
label define age_lbl 078 `"78"', add
label define age_lbl 079 `"79"', add
label define age_lbl 080 `"80"', add
label define age_lbl 081 `"81"', add
label define age_lbl 082 `"82"', add
label define age_lbl 083 `"83"', add
label define age_lbl 084 `"84"', add
label define age_lbl 085 `"85"', add
label define age_lbl 086 `"86"', add
label define age_lbl 087 `"87"', add
label define age_lbl 088 `"88"', add
label define age_lbl 089 `"89"', add
label define age_lbl 090 `"90"', add
label define age_lbl 091 `"91"', add
label define age_lbl 092 `"92"', add
label define age_lbl 093 `"93"', add
label define age_lbl 094 `"94"', add
label define age_lbl 095 `"95"', add
label define age_lbl 096 `"96"', add
label define age_lbl 097 `"97"', add
label define age_lbl 098 `"98"', add
label define age_lbl 099 `"99"', add
label define age_lbl 100 `"100+"', add
label define age_lbl 999 `"Not reported/missing"', add
label values age age_lbl

label define sex_lbl 1 `"Male"'
label define sex_lbl 2 `"Female"', add
label define sex_lbl 9 `"Unknown"', add
label values sex sex_lbl

label define marst_lbl 0 `"NIU (not in universe)"'
label define marst_lbl 1 `"Single/never married"', add
label define marst_lbl 2 `"Married/in union"', add
label define marst_lbl 3 `"Separated/divorced/spouse absent"', add
label define marst_lbl 4 `"Widowed"', add
label define marst_lbl 9 `"Unknown/missing"', add
label values marst marst_lbl

label define marstd_lbl 000 `"NIU (not in universe)"'
label define marstd_lbl 100 `"Single/never married"', add
label define marstd_lbl 110 `"Engaged"', add
label define marstd_lbl 111 `"Never married and never cohabited"', add
label define marstd_lbl 200 `"Married or consensual union"', add
label define marstd_lbl 210 `"Married, formally"', add
label define marstd_lbl 211 `"Married, civil"', add
label define marstd_lbl 212 `"Married, religious"', add
label define marstd_lbl 213 `"Married, civil and religious"', add
label define marstd_lbl 214 `"Married, civil or religious"', add
label define marstd_lbl 215 `"Married, traditional/customary"', add
label define marstd_lbl 216 `"Married, monogamous"', add
label define marstd_lbl 217 `"Married, polygamous"', add
label define marstd_lbl 220 `"Consensual union"', add
label define marstd_lbl 300 `"Separated/divorced/spouse absent"', add
label define marstd_lbl 310 `"Separated or divorced"', add
label define marstd_lbl 320 `"Separated or annulled"', add
label define marstd_lbl 330 `"Separated"', add
label define marstd_lbl 331 `"Separated legally"', add
label define marstd_lbl 332 `"Separated de facto"', add
label define marstd_lbl 333 `"Separated from marriage"', add
label define marstd_lbl 334 `"Separated from consensual union"', add
label define marstd_lbl 335 `"Separated from consensual union or marriage"', add
label define marstd_lbl 340 `"Annulled"', add
label define marstd_lbl 350 `"Divorced"', add
label define marstd_lbl 360 `"Married, spouse absent"', add
label define marstd_lbl 400 `"Widowed"', add
label define marstd_lbl 410 `"Widowed or divorced"', add
label define marstd_lbl 411 `"Widowed from consensual union or marriage"', add
label define marstd_lbl 412 `"Widowed from marriage"', add
label define marstd_lbl 413 `"Widowed from consensual union"', add
label define marstd_lbl 420 `"Widowed, divorced, or separated"', add
label define marstd_lbl 999 `"Unknown/missing"', add
label values marstd marstd_lbl

label define lit_lbl 0 `"NIU (not in universe)"'
label define lit_lbl 1 `"No, illiterate"', add
label define lit_lbl 2 `"Yes, literate"', add
label define lit_lbl 9 `"Unknown/missing"', add
label values lit lit_lbl

label define edattain_lbl 0 `"NIU (not in universe)"'
label define edattain_lbl 1 `"Less than primary completed"', add
label define edattain_lbl 2 `"Primary completed"', add
label define edattain_lbl 3 `"Secondary completed"', add
label define edattain_lbl 4 `"University completed"', add
label define edattain_lbl 9 `"Unknown"', add
label values edattain edattain_lbl

label define edattaind_lbl 000 `"NIU (not in universe)"'
label define edattaind_lbl 100 `"Less than primary completed (n.s.)"', add
label define edattaind_lbl 110 `"No schooling"', add
label define edattaind_lbl 120 `"Some primary completed"', add
label define edattaind_lbl 130 `"Primary (4 yrs) completed"', add
label define edattaind_lbl 211 `"Primary (5 yrs) completed"', add
label define edattaind_lbl 212 `"Primary (6 yrs) completed"', add
label define edattaind_lbl 221 `"Lower secondary general completed"', add
label define edattaind_lbl 222 `"Lower secondary technical completed"', add
label define edattaind_lbl 311 `"Secondary, general track completed"', add
label define edattaind_lbl 312 `"Some college completed"', add
label define edattaind_lbl 320 `"Secondary or post-secondary technical completed"', add
label define edattaind_lbl 321 `"Secondary, technical track completed"', add
label define edattaind_lbl 322 `"Post-secondary technical education"', add
label define edattaind_lbl 400 `"University completed"', add
label define edattaind_lbl 999 `"Unknown/missing"', add
label values edattaind edattaind_lbl

label define yrschool_lbl 00 `"None or pre-school"'
label define yrschool_lbl 01 `"1 year"', add
label define yrschool_lbl 02 `"2 years"', add
label define yrschool_lbl 03 `"3 years"', add
label define yrschool_lbl 04 `"4 years"', add
label define yrschool_lbl 05 `"5 years"', add
label define yrschool_lbl 06 `"6 years"', add
label define yrschool_lbl 07 `"7 years"', add
label define yrschool_lbl 08 `"8 years"', add
label define yrschool_lbl 09 `"9 years"', add
label define yrschool_lbl 10 `"10 years"', add
label define yrschool_lbl 11 `"11 years"', add
label define yrschool_lbl 12 `"12 years"', add
label define yrschool_lbl 13 `"13 years"', add
label define yrschool_lbl 14 `"14 years"', add
label define yrschool_lbl 15 `"15 years"', add
label define yrschool_lbl 16 `"16 years"', add
label define yrschool_lbl 17 `"17 years"', add
label define yrschool_lbl 18 `"18 years or more"', add
label define yrschool_lbl 90 `"Not specified"', add
label define yrschool_lbl 91 `"Some primary"', add
label define yrschool_lbl 92 `"Some technical after primary"', add
label define yrschool_lbl 93 `"Some secondary"', add
label define yrschool_lbl 94 `"Some tertiary"', add
label define yrschool_lbl 95 `"Adult literacy"', add
label define yrschool_lbl 96 `"Special education"', add
label define yrschool_lbl 98 `"Unknown/missing"', add
label define yrschool_lbl 99 `"NIU (not in universe)"', add
label values yrschool yrschool_lbl

label define empstat_lbl 0 `"NIU (not in universe)"'
label define empstat_lbl 1 `"Employed"', add
label define empstat_lbl 2 `"Unemployed"', add
label define empstat_lbl 3 `"Inactive"', add
label define empstat_lbl 9 `"Unknown/missing"', add
label values empstat empstat_lbl

label define empstatd_lbl 000 `"NIU (not in universe)"'
label define empstatd_lbl 100 `"Employed, not specified"', add
label define empstatd_lbl 110 `"At work"', add
label define empstatd_lbl 111 `"At work, and 'student'"', add
label define empstatd_lbl 112 `"At work, and 'housework'"', add
label define empstatd_lbl 113 `"At work, and 'seeking work'"', add
label define empstatd_lbl 114 `"At work, and 'retired'"', add
label define empstatd_lbl 115 `"At work, and 'no work'"', add
label define empstatd_lbl 116 `"At work, and other situation"', add
label define empstatd_lbl 117 `"At work, family holding, not specified"', add
label define empstatd_lbl 118 `"At work, family holding, not agricultural"', add
label define empstatd_lbl 119 `"At work, family holding, agricultural"', add
label define empstatd_lbl 120 `"Have job, not at work in reference period"', add
label define empstatd_lbl 130 `"Armed forces"', add
label define empstatd_lbl 131 `"Armed forces, at work"', add
label define empstatd_lbl 132 `"Armed forces, not at work in reference period"', add
label define empstatd_lbl 133 `"Military trainee"', add
label define empstatd_lbl 140 `"Marginally employed"', add
label define empstatd_lbl 200 `"Unemployed, not specified"', add
label define empstatd_lbl 201 `"Unemployed 6 or more months"', add
label define empstatd_lbl 202 `"Worked fewer than 6 months, permanent job"', add
label define empstatd_lbl 203 `"Worked fewer than 6 months, temporary job"', add
label define empstatd_lbl 210 `"Unemployed, experienced worker"', add
label define empstatd_lbl 220 `"Unemployed, new worker"', add
label define empstatd_lbl 230 `"No work available"', add
label define empstatd_lbl 240 `"Inactive unemployed"', add
label define empstatd_lbl 300 `"Inactive (not in labor force)"', add
label define empstatd_lbl 310 `"Housework"', add
label define empstatd_lbl 320 `"Unable to work, disabled or health reasons"', add
label define empstatd_lbl 321 `"Permanent disability"', add
label define empstatd_lbl 322 `"Temporary illness"', add
label define empstatd_lbl 323 `"Disabled or imprisoned"', add
label define empstatd_lbl 330 `"In school"', add
label define empstatd_lbl 340 `"Retirees and living on rent"', add
label define empstatd_lbl 341 `"Living on rents"', add
label define empstatd_lbl 342 `"Living on rents or pension"', add
label define empstatd_lbl 343 `"Retirees/pensioners"', add
label define empstatd_lbl 344 `"Retired"', add
label define empstatd_lbl 345 `"Pensioner"', add
label define empstatd_lbl 346 `"Non-retirement pension"', add
label define empstatd_lbl 347 `"Disability pension"', add
label define empstatd_lbl 348 `"Retired without benefits"', add
label define empstatd_lbl 350 `"Elderly"', add
label define empstatd_lbl 351 `"Elderly or disabled"', add
label define empstatd_lbl 360 `"Institutionalized"', add
label define empstatd_lbl 361 `"Prisoner"', add
label define empstatd_lbl 370 `"Intermittent worker"', add
label define empstatd_lbl 371 `"Not working, seasonal worker"', add
label define empstatd_lbl 372 `"Not working, occasional worker"', add
label define empstatd_lbl 380 `"Other income recipient"', add
label define empstatd_lbl 390 `"Inactive, other reasons"', add
label define empstatd_lbl 391 `"Too young to work"', add
label define empstatd_lbl 392 `"Dependent"', add
label define empstatd_lbl 999 `"Unknown/missing"', add
label values empstatd empstatd_lbl




******* FILTER: KEEPING ONLY MEN AGED UP TO 80 YEAR
	keep if sex==1 & age<80
	
******* I only need one info per decade, reason why I exclude Mexico-year 1995 from the sample
	drop if sample==484199501

******* RECODING...

**** Unknown into missings
	recode age (999=.)
	recode empstat edattain (9=.)
	
******* ROUNDING WEIGHTS
	gen perwtround=round(perwt)

**************************
** GERANDO AS VARI¡VEIS **
**************************

** 1) Para gerar as taxas de atividade por idade simples

*** 1.1) Contando o n˙mero de pessoas em cada idade

gen countpop=1

*** 1.2) Contando o n˙mero de pessoas QUE S√O ATIVAS em cada idade

gen countactive=1 if empstat==1 | empstat==2


* 2) Anos de estudo: 0=less than primary completed; 1=at least primary completed

gen primedu=1 if edattain>=2 & edattain~=.
	replace primedu=0 if edattain<2

label var primedu `"Grupos de anos de estudo: 0-8 e 9+"'
label define primedulbl 1 `"At least Primary completed"', add
label define primedulbl 0 `"Less than Primary"', add
label values primedu primedulbl

** 3) Para gerar a proporÁ„o de 'Incapacidade para Trabalhar' por idade simples

*** 3.1) Contando o n˙mero de pessoas em cada idade

gen countInac=1 if empstat==3


********* Idades em grupos quinquenais *********

gen agegr=1 if age>=50 & age<55
	replace agegr=2 if age>=55 & age<60
	replace agegr=3 if age>=60 & age<65
	replace agegr=4 if age>=65 & age<70
	replace agegr=5 if age>=70 & age<75
	replace agegr=6 if age>=75 & age<80

label define agegr_lbl 1 `"50-54"'
label define agegr_lbl 2 `"55-59"', add
label define agegr_lbl 3 `"60-64"', add
label define agegr_lbl 4 `"65-69"', add
label define agegr_lbl 5 `"70-74"', add
label define agegr_lbl 6 `"75-79"', add
label values agegr agegr_lbl


saveold "`path'\Stata\Data\LatinAmerica_complete.dta", replace


******************* AGE IN SINGLE YEARS

***** Dataset in LONG

	local i=0
	foreach num of numlist 32197001 32199101 32200101 32201001 32219801 68197601 68199201 68200101 76197001 76198001 76199101 76200001 		///
		76201001 152197001 152198201 152199201 152200201 170197301 170198501 170199301 170200501 188197301 188198401 188200001 188201101	///
		214197001 214198101 214200201 214201001 218197401 218198201 218199001 218200101 218201001 222199201 222200701 332197101 332198201	///
		332200301 484197001 484199001 484200001 484201001 558197101 558199501 558200501 591197001 591198001 591199001 591200001 591201001 	///
		600197201 600198201 600199201 600200201 604199301 604200701 858197501 858198501 858199601 858200621 858201101 862197101 862198101 	///
		862199001 862200101 {
	local ++i
	use "`path'\Stata\Data\LatinAmerica_complete.dta", replace
	local forlab: value label sample
	local label: label `forlab' `num'

	collapse (count) countpop countactive countInac (min) mincountry=country minyear=year if sample==`num' [fw=perwtround], by (age)
	gen LFPR=(countactive/countpop)*100
	gen inLFPR=(countInac/countpop)*100 /* Deixei essa var sÛ pra eu ter a coluna criada. Vou delet·-la e substituÌ-la pelos DALYs */
	drop countpop countactive countInac

	sort age
	tempfile activityrate`i'
	saveold `activityrate`i''
	}
* No loop abaixo, se eu acrescentar paÌses/anos, ou seja, aumentar a numlist no foreach anterior, preciso mudar o n˙mero de forvalues abaixo

local i=0
forvalues i = 0(1)66 { 
	local ++i
	if `i'==1 {
	use `activityrate`i'', clear
	}
		if `i'>=2 & `i'<=66 {
		append using `activityrate`i''
		sort age
		saveold `activityrate`i'', replace
		}
}




keep if age>=50 & age<80

*keep if minyear>=1990 & minyear<=2010


*** To separate years into variables:

** Replacing any year inside a decade for the decades to which it corresponds

replace minyear=1970 if minyear<1980
replace minyear=1980 if minyear>=1980 & minyear<1990
replace minyear=1990 if minyear>=1990 & minyear<2000
replace minyear=2000 if minyear>=2000 & minyear<2010
replace minyear=2010 if minyear>=2010 & minyear~=.


** Transforming each decade into different variables in separate datasets

drop inLFPR
rename mincountry country
rename minyear year
sort country year age

saveold "`path'\Stata\Data\LFPRlong_rev1.dta", replace

** Adding mortality rates to the dataset

import excel "`path'\LAC interpol Sprague - final.xlsx", sheet("mortalitydata") firstrow clear

sort country year age
 
merge country year age using "`path'\Stata\Data\LFPRlong_rev1.dta"

ta _merge 

*** _merge==1 because there is no IPUMSI census in 1980 for Mexico.


drop _merge


gen agegr=1 if age>=50 & age<55
	replace agegr=2 if age>=55 & age<60
	replace agegr=3 if age>=60 & age<65
	replace agegr=4 if age>=65 & age<70
	replace agegr=5 if age>=70 & age<75
	replace agegr=6 if age>=75 & age<80

	label define agegr_lbl 1 `"50-54"'
	label define agegr_lbl 2 `"55-59"', add
	label define agegr_lbl 3 `"60-64"', add
	label define agegr_lbl 4 `"65-69"', add
	label define agegr_lbl 5 `"70-74"', add
	label define agegr_lbl 6 `"75-79"', add
	label values agegr agegr_lbl
	

sort country year agegr

saveold "`path'\Stata\Data\LFPRlong_rev1.dta", replace
 

   
** Adding YLD rates to the dataset
  

import excel "`path'\IHME-GBD_2015_DATA-c52c15a5-1 (number and rate) (single years).xlsx", sheet("YLDs") firstrow clear
  
 drop measure name D F G
 
 sort country year agegr
 
 saveold "`path'\Stata\Data\YLDs.dta", replace
 
 merge country year agegr using "`path'\Stata\Data\LFPRlong_rev1.dta"

 *** Merge est· ok: 2=years 1970 e 1980, 1=paises/anos sem dados no IPUMSI

	ta _merge
	
	drop _merge
	

saveold "`path'\Stata\Data\LFPRlong_rev1.dta", replace



 
 keep if year==2010

rename LFPR LFPR2010
rename mortrate mortrate2010
rename YLDrate YLDrate2010

sort country year age

saveold "`path'\Stata\Data\Temp2010.dta", replace


use "`path'\Stata\Data\LFPRlong_rev1.dta", replace

keep if year==2000

rename LFPR LFPR2000
rename mortrate mortrate2000
rename YLDrate YLDrate2000

sort country year age

saveold "`path'\Stata\Data\Temp2000.dta", replace


use "`path'\Stata\Data\LFPRlong_rev1.dta", replace

keep if year==1990

rename LFPR LFPR1990
rename mortrate mortrate1990
rename YLDrate YLDrate1990

sort country year age

saveold "`path'\Stata\Data\Temp1990.dta", replace


use "`path'\Stata\Data\LFPRlong_rev1.dta", replace

keep if year==1980

rename LFPR LFPR1980
rename mortrate mortrate1980
rename YLDrate YLDrate1980

sort country year age

saveold "`path'\Stata\Data\Temp1980.dta", replace


use "`path'\Stata\Data\LFPRlong_rev1.dta", replace

keep if year==1970

rename LFPR LFPR1970
rename mortrate mortrate1970
rename YLDrate YLDrate1970

sort country year age

saveold "`path'\Stata\Data\Temp1970.dta", replace

** Merging all separete datasets in only one

		sort country year age

	merge country year age using "`path'\Stata\Data\Temp1980.dta"

		drop _merge

		sort country year age

	merge country year age using "`path'\Stata\Data\Temp1990.dta"

		drop _merge

		sort country year age

	merge country year age using "`path'\Stata\Data\Temp2000.dta"

		drop _merge

		sort country year age


	merge country year age using "`path'\Stata\Data\Temp2010.dta"

		drop _merge

		sort country year age

label variable country ""

label define country_lbl 032 `"Argentina"'
label define country_lbl 068 `"Bolivia"', add
label define country_lbl 076 `"Brazil"', add
label define country_lbl 152 `"Chile"', add
label define country_lbl 170 `"Colombia"', add
label define country_lbl 188 `"Costa Rica"', add
label define country_lbl 214 `"Dominican Republic"', add
label define country_lbl 218 `"Ecuador"', add
label define country_lbl 222 `"El Salvador"', add
label define country_lbl 332 `"Haiti"', add
label define country_lbl 484 `"Mexico"', add
label define country_lbl 558 `"Nicaragua"', add
label define country_lbl 591 `"Panama"', add
label define country_lbl 600 `"Paraguay"', add
label define country_lbl 604 `"Peru"', add
label define country_lbl 858 `"Uruguay"', add
label define country_lbl 862 `"Venezuela"', add
label values country country_lbl


**** Defining the groups of countries according to the level of Social Security coverage (based on the proportion of workers with right to pensions when retired)

gen SScoverage=1 if country==858 | country==152 | country==76 | country==214 | country==188 | country==32
	replace SScoverage=2 if country==170 | country==862 | country==218 | country==604 | country==222 | country==591
	replace SScoverage=3 if country==68 | country==600 | country==484 | country==558 | country==332
	
	label define SScoverage_lbl 1 "Highest SSC" 2 "Medium SSC" 3 "Lowest SSC"
	label values SScoverage SScoverage_lbl



 sort country year age

 
	* Figure 2 - Labor Force Participation Rates, Males, Latin America, 1970s-2010s

label var LFPR1970    `"1970s"'
label var LFPR1980    `"1980s"'
label var LFPR1990    `"1990s"'
label var LFPR2000    `"2000s"'
label var LFPR2010    `"2010s"'
	
 twoway (line LFPR1970 age) (line LFPR1980 age) (line LFPR1990 age) 	///
			(line LFPR2000 age) (line LFPR2010 age) if SScoverage==1, by(country, note("") noiy title("Highest SSC")) 			///
			ylabel(0(50)100) ytitle(LFPR rates (%)) xtitle(Men's age)
 
   graph save "`path'\Stata\Log\LAC_LFPRxAge_1970s2010s1.gph", replace

 twoway (line LFPR1970 age) (line LFPR1980 age) (line LFPR1990 age) 	///
			(line LFPR2000 age) (line LFPR2010 age) if SScoverage==2, by(country, note("") legend(off) noiy title("Medium SSC")) 			///
			ylabel(0(50)100) ytitle(LFPR rates (%)) xtitle(Men's age)
 
   graph save "`path'\Stata\Log\LAC_LFPRxAge_1970s2010s2.gph", replace

 twoway (line LFPR1970 age) (line LFPR1980 age) (line LFPR1990 age) 	///
			(line LFPR2000 age) (line LFPR2010 age) if SScoverage==3, by(country, note("") legend(off) noiy title("Lowest SSC")) 			///
			ylabel(0(50)100) ytitle(LFPR rates (%)) xtitle(Men's age)
 
   graph save "`path'\Stata\Log\LAC_LFPRxAge_1970s2010s3.gph", replace
 
   grc1leg2 "`path'\Stata\Log\LAC_LFPRxAge_1970s2010s1.gph" 			///
   "`path'\Stata\Log\LAC_LFPRxAge_1970s2010s2.gph" 					///
   "`path'\Stata\Log\LAC_LFPRxAge_1970s2010s3.gph", row(2) 			///
   position(4) ring(0) imargin(0 0 0 0)
 
   graph save "`path'\Stata\Log\Fig2_LFPRxAge_1970s2010s.gph", replace
   
   * Figure 4 - Mortality Rates, Males, Latin America, 1970s-2010s

label var mortrate1970    `"1970s"'
label var mortrate1980    `"1980s"'
label var mortrate1990    `"1990s"'
label var mortrate2000    `"2000s"'
label var mortrate2010    `"2010s"'
	
 graph hbar mortrate1970 mortrate1980 mortrate1990 mortrate2000 mortrate2010 if age==65, by(country, note("")) 						///
			ylabel(0(2)8) ytitle(Mortality rates (%)) legend(label(1 "1970s") label(2 "1980s") label(3 "1990s") label(4 "2000s") label(5 "2010s"))

   graph export "`path'\Stata\Log\Fig3_MortRatexAge_1970s2010s.pdf", replace
 
 
 	* Figure 5 - Labor Force Participation Rates X Mortality Rates, Males, Latin America, 1970s-2010s
	
 twoway (scatter LFPR1970 mortrate1970, msize(small)) (scatter LFPR1980 mortrate1980, msize(small)) (scatter LFPR1990 mortrate1990, msize(small)) 	///
			(scatter LFPR2000 mortrate2000, msize(small)) (scatter LFPR2010 mortrate2010, msize(small)) if SScoverage==1, by(country, note("") noiy title("Highest SSC")) ///
			ylabel(0(50)100) ytitle(LFPR rates (%)) xtitle(Mortality rates (%))

   graph save "`path'\Stata\Log\LAC_LFPRxMortRates_1970s2010s1.gph", replace
	
 twoway (scatter LFPR1970 mortrate1970, msize(small)) (scatter LFPR1980 mortrate1980, msize(small)) (scatter LFPR1990 mortrate1990, msize(small)) 						///
			(scatter LFPR2000 mortrate2000, msize(small)) (scatter LFPR2010 mortrate2010, msize(small)) if SScoverage==2, by(country, note("") legend(off) noiy title("Medium SSC")) ///
			ylabel(0(50)100) ytitle(LFPR rates (%)) xtitle(Mortality rates (%))

   graph save "`path'\Stata\Log\LAC_LFPRxMortRates_1970s2010s2.gph", replace
 	
 twoway (scatter LFPR1970 mortrate1970, msize(small)) (scatter LFPR1980 mortrate1980, msize(small)) (scatter LFPR1990 mortrate1990, msize(small)) 						///
			(scatter LFPR2000 mortrate2000, msize(small)) (scatter LFPR2010 mortrate2010, msize(small)) if SScoverage==3, by(country, note("") legend(off) noiy title("Lowest SSC")) ///
			ylabel(0(50)100) ytitle(LFPR rates (%)) xtitle(Mortality rates (%))

   graph save "`path'\Stata\Log\LAC_LFPRxMortRates_1970s2010s3.gph", replace
  
   grc1leg2 "`path'\Stata\Log\LAC_LFPRxMortRates_1970s2010s1.gph" 			///
   "`path'\Stata\Log\LAC_LFPRxMortRates_1970s2010s2.gph" 					///
   "`path'\Stata\Log\LAC_LFPRxMortRates_1970s2010s3.gph", row(2) 			///
   position(4) ring(0) imargin(0 0 0 0)
   
 
   graph save "`path'\Stata\Log\Fig5_LFPRxMortRates_1970s2010s.gph", replace 

   
   
	* Figure 6 ñ Labor Force Participation Rates and Mortality Rates, Males, Brazil, 1970s and 2010s 
 
 twoway (scatter LFPR1970 mortrate1970) (scatter LFPR2010 mortrate2010) if country==76,							///
			ylabel(10(10)90) ytitle(LFPR rates (%)) xtitle(Mortality rates (%)) xlabel(0(1)12)
    
   graph export "`path'\Stata\Log\Fig6_LFPRxMortRate_1970s2010sBR.pdf", replace


	* Figure 7 ñ LFPR and YLDs Rates, Males, Latin America, Selected countries,  1990s, 2000s and 2010s

***** Para rodar o gr·fico LFPRxYLDs

preserve

collapse (min) minLFPR1990=LFPR1990 minYLDrate1990=YLDrate1990 minLFPR2000=LFPR2000 							///
	minYLDrate2000=YLDrate2000 minLFPR2010=LFPR2010 minYLDrate2010=YLDrate2010 minSScoverage=SScoverage, by (country agegr)

  rename minLFPR1990 LFPR1990
  rename minLFPR2000 LFPR2000
  rename minLFPR2010 LFPR2010

  rename minYLDrate1990 YLDrate1990
  rename minYLDrate2000 YLDrate2000
  rename minYLDrate2010 YLDrate2010
  
  rename minSScoverage SScoverage
    

label var LFPR1990    `"1990s"'
label var LFPR2000    `"2000s"'
label var LFPR2010    `"2010s"'
label var YLDrate1990    `"1990s"'
label var YLDrate2000    `"2000s"'
label var YLDrate2010    `"2010s"'
	  
 twoway (scatter LFPR1990 YLDrate1990) (scatter LFPR2000 YLDrate2000) (scatter LFPR2010 YLDrate2010) if SScoverage==1, by(country, note("") noiy title("Highest SSC")) 	///
	ylabel(0(50)100) xlabel(10000(20000)40000) ytitle(LFPR rates (%)) xtitle(YLDs rates)
 
 
  graph save "`path'\Stata\Log\LAC_LFPRxYLDs_1990s2010s1.gph", replace
	  
 twoway (scatter LFPR1990 YLDrate1990) (scatter LFPR2000 YLDrate2000) (scatter LFPR2010 YLDrate2010) if SScoverage==2, by(country, note("") legend(off) noiy title("Medium SSC")) 	///
	ylabel(0(50)100) xlabel(10000(20000)40000) ytitle(LFPR rates (%)) xtitle(YLDs rates)
 
 
  graph save "`path'\Stata\Log\LAC_LFPRxYLDs_1990s2010s2.gph", replace
	  
 twoway (scatter LFPR1990 YLDrate1990) (scatter LFPR2000 YLDrate2000) (scatter LFPR2010 YLDrate2010) if SScoverage==3, by(country, note("") legend(off) noiy title("Lowest SSC")) 	///
	ylabel(0(50)100) xlabel(10000(20000)40000) ytitle(LFPR rates (%)) xtitle(YLDs rates)
 
 
  graph save "`path'\Stata\Log\LAC_LFPRxYLDs_1990s2010s3.gph", replace
 
   grc1leg2 "`path'\Stata\Log\LAC_LFPRxYLDs_1990s2010s1.gph" 			///
   "`path'\Stata\Log\LAC_LFPRxYLDs_1990s2010s2.gph" 					///
   "`path'\Stata\Log\LAC_LFPRxYLDs_1990s2010s3.gph", row(2) 			///
   position(4) ring(0) imargin(0 0 0 0)
   
 
   graph save "`path'\Stata\Log\Fig8_LFPRxYLDs_1990s2010s.gph", replace 

   
restore

order age agegr country name year SScoverage LFPR1970 LFPR1980 LFPR1990 LFPR2000 LFPR2010 mortrate1970 mortrate1980 mortrate1990 ///
mortrate2000 mortrate2010 YLDrate1970 YLDrate1980 YLDrate1990 YLDrate2000 YLDrate2010


saveold "`path'\Stata\Data\LFPRwide_rev1.dta", replace




use "`path'\Stata\Data\LFPRlong_rev1.dta", clear

**** Defining the groups of countries according to the level of Social Security coverage (based on the proportion of workers with right to pensions when retired)

gen SScoverage=1 if country==858 | country==152 | country==76 | country==214 | country==188 | country==32
	replace SScoverage=2 if country==170 | country==862 | country==218 | country==604 | country==222 | country==591
	replace SScoverage=3 if country==68 | country==600 | country==484 | country==558 | country==332
	
	label define SScoverage_lbl 1 "Highest SSC" 2 "Medium SSC" 3 "Lowest SSC"
	label values SScoverage SScoverage_lbl

label define country_lbl 032 `"Argentina"'
label define country_lbl 051 `"Armenia"', add
label define country_lbl 040 `"Austria"', add
label define country_lbl 050 `"Bangladesh"', add
label define country_lbl 112 `"Belarus"', add
label define country_lbl 068 `"Bolivia"', add
label define country_lbl 072 `"Botswana"', add
label define country_lbl 076 `"Brazil"', add
label define country_lbl 854 `"Burkina Faso"', add
label define country_lbl 116 `"Cambodia"', add
label define country_lbl 120 `"Cameroon"', add
label define country_lbl 124 `"Canada"', add
label define country_lbl 152 `"Chile"', add
label define country_lbl 156 `"China"', add
label define country_lbl 170 `"Colombia"', add
label define country_lbl 188 `"Costa Rica"', add
label define country_lbl 192 `"Cuba"', add
label define country_lbl 214 `"Dominican Republic"', add
label define country_lbl 218 `"Ecuador"', add
label define country_lbl 818 `"Egypt"', add
label define country_lbl 222 `"El Salvador"', add
label define country_lbl 231 `"Ethiopia"', add
label define country_lbl 242 `"Fiji"', add
label define country_lbl 250 `"France"', add
label define country_lbl 276 `"Germany"', add
label define country_lbl 288 `"Ghana"', add
label define country_lbl 300 `"Greece"', add
label define country_lbl 324 `"Guinea"', add
label define country_lbl 332 `"Haiti"', add
label define country_lbl 348 `"Hungary"', add
label define country_lbl 356 `"India"', add
label define country_lbl 360 `"Indonesia"', add
label define country_lbl 364 `"Iran"', add
label define country_lbl 368 `"Iraq"', add
label define country_lbl 372 `"Ireland"', add
label define country_lbl 376 `"Israel"', add
label define country_lbl 380 `"Italy"', add
label define country_lbl 388 `"Jamaica"', add
label define country_lbl 400 `"Jordan"', add
label define country_lbl 404 `"Kenya"', add
label define country_lbl 417 `"Kyrgyz Republic"', add
label define country_lbl 430 `"Liberia"', add
label define country_lbl 454 `"Malawi"', add
label define country_lbl 458 `"Malaysia"', add
label define country_lbl 466 `"Mali"', add
label define country_lbl 484 `"Mexico"', add
label define country_lbl 496 `"Mongolia"', add
label define country_lbl 504 `"Morocco"', add
label define country_lbl 508 `"Mozambique"', add
label define country_lbl 524 `"Nepal"', add
label define country_lbl 528 `"Netherlands"', add
label define country_lbl 558 `"Nicaragua"', add
label define country_lbl 566 `"Nigeria"', add
label define country_lbl 586 `"Pakistan"', add
label define country_lbl 275 `"Palestine"', add
label define country_lbl 591 `"Panama"', add
label define country_lbl 600 `"Paraguay"', add
label define country_lbl 604 `"Peru"', add
label define country_lbl 608 `"Philippines"', add
label define country_lbl 616 `"Poland"', add
label define country_lbl 620 `"Portugal"', add
label define country_lbl 630 `"Puerto Rico"', add
label define country_lbl 642 `"Romania"', add
label define country_lbl 646 `"Rwanda"', add
label define country_lbl 662 `"Saint Lucia"', add
label define country_lbl 686 `"Senegal"', add
label define country_lbl 694 `"Sierra Leone"', add
label define country_lbl 705 `"Slovenia"', add
label define country_lbl 710 `"South Africa"', add
label define country_lbl 728 `"South Sudan"', add
label define country_lbl 724 `"Spain"', add
label define country_lbl 729 `"Sudan"', add
label define country_lbl 756 `"Switzerland"', add
label define country_lbl 834 `"Tanzania"', add
label define country_lbl 764 `"Thailand"', add
label define country_lbl 780 `"Trinidad and Tobago"', add
label define country_lbl 792 `"Turkey"', add
label define country_lbl 800 `"Uganda"', add
label define country_lbl 804 `"Ukraine"', add
label define country_lbl 826 `"United Kingdom"', add
label define country_lbl 840 `"United States"', add
label define country_lbl 858 `"Uruguay"', add
label define country_lbl 862 `"Venezuela"', add
label define country_lbl 704 `"Vietnam"', add
label define country_lbl 894 `"Zambia"', add
label values country country_lbl
	
order age agegr country name year SScoverage LFPR mortrate YLDrate 
 
saveold "`path'\Stata\Data\LFPRlong_rev1.dta", replace


****** For Figures: How old should feel like at 65 (60) years of age in 1970's? Males, Latin American, 1970s and 2000s/2010s 

	*** Mortality rates
	
keep country year age mortrate

*** All countries but El Salvador and Peru have information on year 1970. And all the same countries have information on 2000.

drop if country==222 | country==604
keep if year==1970 | year==2000

tempvar mort60in70 mort65in70

* Var with mortality rate at age 60 and 65
gen `mort60in70'=mortrate if age==60 & year==1970

gen `mort65in70'=mortrate if age==65 & year==1970

* expanding the value for all ages per country
bysort country: egen mort60in70=min(`mort60in70')

bysort country: egen mort65in70=min(`mort65in70')

* Var with mortality rates in 2000

gen mort2000=mortrate if year==2000

* Difference between mortality at 60 (65) in 1970 and all mortality rates by age in 2000 by country
gen dif60=abs(mort2000-mort60in70)
gen dif65=abs(mort2000-mort65in70)

* Minimum difference (in terms of mortality rates) by country between age 60 (65) in 1970 and all ages in 2000 (to find out the smallest difference)
bysort country: egen mindif60=min(dif60)
bysort country: egen mindif65=min(dif65)

* Corresponding age in 2000 for the same mortality rate at age 60(65) in 1970
tempvar agein2000_60in70 agein2000_65in70

gen `agein2000_60in70'=age if mindif60==dif60 & year==2000
gen `agein2000_65in70'=age if mindif65==dif65 & year==2000

bysort country: egen agein2000_60in70=min(`agein2000_60in70')
bysort country: egen agein2000_65in70=min(`agein2000_65in70')


preserve

recode country (32=1) (68=2) (76=3) (152=4) (170=5) (188=6) (214=7) (218=8) (332=9) (484=10) ///
	(558=11) (591=12) (600=13) (858=14) (862=15)

label define country2_lbl 1 `"Argentina"'
label define country2_lbl 2 `"Bolivia"', add
label define country2_lbl 3 `"Brazil"', add
label define country2_lbl 4 `"Chile"', add
label define country2_lbl 5 `"Colombia"', add
label define country2_lbl 6 `"Costa Rica"', add
label define country2_lbl 7 `"Dominican Republic"', add
label define country2_lbl 8 `"Ecuador"', add
label define country2_lbl 9 `"Haiti"', add
label define country2_lbl 10 `"Mexico"', add
label define country2_lbl 11 `"Nicaragua"', add
label define country2_lbl 12 `"Panama"', add
label define country2_lbl 13 `"Paraguay"', add
label define country2_lbl 14 `"Uruguay"', add
label define country2_lbl 15 `"Venezuela"', add

label values country country2_lbl

label var agein2000_60in70    `"60 years old in 1970s"'
label var agein2000_65in70    `"65 years old in 1970s"'

ta country
	  
 twoway (scatter agein2000_60in70 country) (scatter agein2000_65in70 country),  	///
	ylabel(50(3)73) xlabel(1(1)15, angle(forty_five) valuelabel) ytitle(Age in 2000) xtitle(Countries)
   
   graph export "`path'\Stata\Log\Fig4_HowOld_1970s2000sMort.pdf", replace

	
restore



	*** YLDs

import excel "`path'\IHME-GBD_2015_DATA-c52c15a5-1 (number and rate) (single years).xlsx", sheet("YLDs2") firstrow clear
  
 drop measure name D F G
 
 sort country year agegr
 
 saveold "`path'\Stata\Data\YLDs2.dta", replace
 
 
keep country year agegr YLDrate

*** All countries have information on years 1990 and 2015. 

tempvar YLD4549in90 YLD5054in15 YLD6064in90 YLD6569in15

gen `YLD4549in90'=YLDrate if agegr==0 & year==1990
gen `YLD5054in15'=YLDrate if agegr==1 & year==2015

gen `YLD6064in90'=YLDrate if agegr==3 & year==1990
gen `YLD6569in15'=YLDrate if agegr==4 & year==2015

* expanding the value for all ages per country
bysort country: egen YLD4549in90=min(`YLD4549in90')
bysort country: egen YLD5054in15=min(`YLD5054in15')
bysort country: egen YLD6064in90=min(`YLD6064in90')
bysort country: egen YLD6569in15=min(`YLD6569in15')


recode country (32=1) (68=2) (76=3) (152=4) (170=5) (188=6) (214=7) (218=8) (222=9) (332=10) (484=11) ///
	(558=12) (591=13) (600=14) (604=15) (858=16) (862=17)

label define country2_lbl 1 `"Argentina"'
label define country2_lbl 2 `"Bolivia"', add
label define country2_lbl 3 `"Brazil"', add
label define country2_lbl 4 `"Chile"', add
label define country2_lbl 5 `"Colombia"', add
label define country2_lbl 6 `"Costa Rica"', add
label define country2_lbl 7 `"Dominican Republic"', add
label define country2_lbl 8 `"Ecuador"', add
label define country2_lbl 9 `"El Salvador"', add
label define country2_lbl 10 `"Haiti"', add
label define country2_lbl 11 `"Mexico"', add
label define country2_lbl 12 `"Nicaragua"', add
label define country2_lbl 13 `"Panama"', add
label define country2_lbl 14 `"Paraguay"', add
label define country2_lbl 15 `"Peru"', add
label define country2_lbl 16 `"Uruguay"', add
label define country2_lbl 17 `"Venezuela"', add

label values country country2_lbl

label var YLD4549in90    `"45-49 in 1990"'
label var YLD5054in15    `"50-54 in 2015"'
label var YLD6064in90    `"60-64 in 1990"'
label var YLD6569in15    `"65-69 in 2015"'

ta country
	  	  

 twoway (scatter YLD4549in90 country) (scatter YLD5054in15 country)	///
	(scatter YLD6064in90 country) (scatter YLD6569in15 country),  	///
	ylabel(10000(5000)25000) xlabel(1(1)17, angle(forty_five) valuelabel) ytitle(YLDs (rate)) xtitle(Countries)
   
   graph export "`path'\Stata\Log\Fig7_HowOld_1990s2015sYLD.pdf", replace

	
************ FOR APPENDIX TABLE WITH DATA USED TO CONSTRUCT FIGURES 2, 5 AND 8

use "`path'\Stata\Data\LFPRlong_rev1.dta", replace

order country SScoverage year age agegr LFPR mortrate YLDrate

drop name

sort country year age

label var country "Country"
label var SScoverage "Access to SS based on % of male workers with right to pensions when retired"
label var year "Decade"
label var age "Age"
label var agegr "Age groups"
label var LFPR "Labor Force Participation (LFPR) Rates (%)"
label var mortrate "Mortality Rates (%)"
label var YLDrate "Years Lived with Disability (YLD) Rates"

replace LFPR=round(LFPR, 0.1)
replace mortrate=round(mortrate, 0.1)
replace YLDrate=round(YLDrate, 0.1)

export excel using "`path'\DataPointsForFigs2-5-8.xls", firstrow(varlabels) sheet("DataPoints", replace)
	
	
************ FIGURE 1

import excel "`path'\Fig1_Percentage of male workers without right to pensions when retired.xls", sheet("SScoverageData") firstrow clear
 
recode country (32=6) (68=14) (76=3) (152=2) (170=7) (188=5) ///
			(214=4) (218=10) (222=12) (332=13) (484=16) (558=17) 	///
			(591=9) (600=15) (604=11) (858=1) (862=8)

label define country2_lbl 1 `"Uruguay"'
label define country2_lbl 2 `"Chile"', add
label define country2_lbl 3 `"Brazil"', add
label define country2_lbl 4 `"Dominican Republic"', add
label define country2_lbl 5 `"Costa Rica"', add
label define country2_lbl 6 `"Argentina"', add
label define country2_lbl 7 `"Colombia"', add
label define country2_lbl 8 `"Venezuela"', add
label define country2_lbl 9 `"Panama"', add
label define country2_lbl 10 `"Ecuador"', add
label define country2_lbl 11 `"Peru"', add
label define country2_lbl 12 `"El Salvador"', add
label define country2_lbl 13 `"Haiti"', add
label define country2_lbl 14 `"Bolivia"', add
label define country2_lbl 15 `"Paraguay"', add
label define country2_lbl 16 `"Mexico"', add
label define country2_lbl 17 `"Nicaragua"', add

label values country country2_lbl
	
scatter perc2000 perc2001 perc2002 perc2003 perc2004 perc2005 perc2006 perc2007 perc2008 perc2009 perc2010 		///
	perc2011 perc2012 perc2013 perc2014 perc2015 country, ylabel(0(10)100) xlabel(1(1)17, 						///
	angle(forty_five) valuelabel) ytitle(% of workers with right to pensions) xtitle(Countries) 	///
	yline(0) yline(50) yline(70) yline(100)	xline(6) xline(12) mcolor(gs16 gs15 gs14 gs13 gs12 gs11 gs10 		///
	gs9 gs8 gs7 gs6 gs5 gs4 gs3 gs2 gs1 gs0)
	
	
****** DATASET for Figure 6 ñ Mortality and Labor Force Participation Rates - Older Males, Brazil, 1970s and 2010s
********** AFTER REVIEW

  use "`path'\Stata\Data\LFPRwide_rev1.dta", replace

keep country age LFPR1970 mortrate1970 LFPR2010 mortrate2010

   keep if country==76
   drop if LFPR1970==. & mortrate1970==. & LFPR2010==. & mortrate2010==.

   order country age LFPR1970 mortrate1970 LFPR2010 mortrate2010
   
  save "`path'\Stata\Data\DatasetFig6_rev1.dta", replace
